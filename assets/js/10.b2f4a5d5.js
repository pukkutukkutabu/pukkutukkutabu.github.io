(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{178:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[s._v("#")]),s._v(" NGINX")]),s._v(" "),t("h2",{attrs:{id:"pfx-формат-сертификатов"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pfx-формат-сертификатов","aria-hidden":"true"}},[s._v("#")]),s._v(" PFX формат сертификатов")]),s._v(" "),t("p",[s._v("PFX - формат файла, в котором запакованы доменный сетификат, приватный ключ и цепочки сетификатов (промежуточный и корневой).\nДля того чтобы он был понятен для nginx, из него необходимо достатать эти сертификаты в понятной для nginx форме")]),s._v(" "),t("h3",{attrs:{id:"настройка-ssl-и-распаковка-сертификатов-из-формата"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#настройка-ssl-и-распаковка-сертификатов-из-формата","aria-hidden":"true"}},[s._v("#")]),s._v(" Настройка SSL и распаковка сертификатов из формата")]),s._v(" "),t("h3",{attrs:{id:"распаковать-доменный-сертификат"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#распаковать-доменный-сертификат","aria-hidden":"true"}},[s._v("#")]),s._v(" Распаковать доменный сертификат")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("openssl pkcs12 -in ./cert.pfx -clcerts -nokeys -out domain.crt\n")])])]),t("h3",{attrs:{id:"распаковать-приватный-кnюч"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#распаковать-приватный-кnюч","aria-hidden":"true"}},[s._v("#")]),s._v(" Распаковать приватный ключ")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("openssl pkcs12 -in ./cert.pfx -nocerts -nodes -out domain.key\n")])])]),t("h3",{attrs:{id:"рапспаковать-цепочку-сертификатов-промежуточный-и-корневой"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#рапспаковать-цепочку-сертификатов-промежуточный-и-корневой","aria-hidden":"true"}},[s._v("#")]),s._v(" Рапспаковать цепочку сертификатов (промежуточный и корневой)")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("openssl pkcs12 -in ./cert.pfx -cacerts -nokeys -out ca.crt\n")])])]),t("h2",{attrs:{id:"настройка-ssl-внутри-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#настройка-ssl-внутри-nginx","aria-hidden":"true"}},[s._v("#")]),s._v(" Настройка ssl внутри nginx")]),s._v(" "),t("p",[s._v("Перед использованием, часто необходимо склеивать сетефикаты и цепочку с промежуточным и корневым сертификатом в один bundle")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" domain.crt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" domain.crt ca.crt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bundle.crt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" domain.key /etc/nginx/ssl/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" bundle.crt /etc/nginx/ssl/\n")])])]),t("p",[s._v("Настройка осуществляется в блоке server. Строки необходимые для работы сертификата:")]),s._v(" "),t("div",{staticClass:"language-nginx extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bundle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("domain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])}],!1,null,null,null);a.default=n.exports}}]);